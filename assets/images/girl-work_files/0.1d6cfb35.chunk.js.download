(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"+GZi":function(e,t,a){},"1b8i":function(e,t,a){"use strict";var n=a("s8DI"),r=a("da4L"),c=a("ERkP");t.a=function useTimedMessages(e,t){var a=Object(c.useState)(function(){return e}),i=Object(n.a)(a,2),o=i[0],s=i[1],l=Object(c.useRef)(t),u=Object(c.useRef)(null);return Object(c.useEffect)(function(){if(t){if(e!==o){var a=o.length;if(0===e.length&&a>0)s([]);else{if(l.current!==t||a===e.length)return l.current=t,void s(e);var n=function pushMessage(){return s(e.slice(0,a+1))},c=e[a]||e[0];if(!(Date.now()-c.createdAt>6e4||Object(r.h)(c)||Object(r.i)(c)))return u.current=window.setTimeout(function(){u.current=null,n()},600),function(){u.current&&window.clearTimeout(u.current)};n()}}}else o.length>0&&s([])},[e,o,t]),o}},"2VrW":function(e,t,a){},"7IKl":function(e,t,a){"use strict";var n=a("ERkP"),r=a("Tr4L"),c=a("uDfI"),i=a("F8vJ");t.a=function useAgentName(e){var t=Object(c.c)(function(e){return e.embed.configuration}).team,a=void 0===t?[]:t,o=Object(r.a)().t;return Object(n.useMemo)(function(){var t=a.find(function(t){return t.id===e});return t&&!Object(i.a)(t.name)?t.name:o("agent")},[a,e,o])}},"8eKL":function(e,t,a){"use strict";var n=a("mj2O"),r=a.n(n),c=a("7SM1"),i=a("s8DI"),o=a("O94r"),s=a.n(o),l=a("HXmn"),u=a("NJA7"),d=a("fw6E"),m=a("K7i0"),f=a("+oIK"),g=a("+f1A"),b=a("ERkP"),p=a.n(b),v=a("uDfI"),j=a("0lfv"),h=(a("yAze"),function AgentRequestedOptions(e){var t=e.message,a=t.attributes,n=t.id,o=t.conversationId,s=Object(v.b)(),l=Object(v.c)(function(e){return e.session}).endUser,h=Object(d.a)().conversationHistoryOpen,O=Object(v.c)(function(e){return e.view}).chatOpen,E=Object(b.useState)(!O),w=Object(i.a)(E,2),y=w[0],A=w[1],k=Object(v.c)(g.h),N=function doSendMessage(e){var a=e.label;return function(){var e=Object(f.a)({message:a,activeConversation:o,authorId:l.id,attributes:{buttonClicked:!0,questionId:t.attributes.questionId,instanceId:k}});s(Object(m.m)({message:e}))}};Object(b.useLayoutEffect)(function(){function _delayButtons(){return(_delayButtons=Object(c.a)(r.a.mark(function _callee(){return r.a.wrap(function _callee$(e){for(;;)switch(e.prev=e.next){case 0:if(!O||y){e.next=4;break}return e.next=3,Object(j.q)(500);case 3:A(!0);case 4:case"end":return e.stop()}},_callee)}))).apply(this,arguments)}!function delayButtons(){return _delayButtons.apply(this,arguments)}()},[y,O]);var T=y?"visible":"hidden";return p.a.createElement("ul",{className:"drift-widget-message-group drift-widget-message-group-type--END_USER drift-bot-buttons--set drift-bot-buttons--".concat(T)},a.buttons.map(function(e,t){return p.a.createElement("li",{className:"drift-widget-button--list-item","aria-posinset":t,key:"bot-button-".concat(n,"-").concat(t)},p.a.createElement(u.a,{onClick:N(e),invertOnHover:!0,disabled:h,"aria-label":"".concat(e.label," - Click to reply with this message")},e.label))}))}),O=a("nfbA"),E=a("efbE"),w=a("rAc1"),y=a("l6A5"),A=function urlIdentity(e){return Object(w.a)(e)},k=(Object(y.a)(A,function(e){return E.k.get("/",{params:{url:encodeURI(e)}})}),Object(y.a)(A,function(e){return E.j.get("/",{params:{url:e,iframe:1,omit_script:1,media:1}})})),N=function Retry(e){var t=e.height,a=void 0===t?24:t,n=e.width,r=void 0===n?24:n;return p.a.createElement("svg",{className:"drift-default-icon drift-default-icon--retry",width:r,height:a,viewBox:"0 0 28 24"},p.a.createElement("path",{d:"M27.82 19.074c-0.17 0.085-0.353 0.126-0.53 0.126-0.436 0-0.854-0.244-1.063-0.664l-0.994-2.010c-1.762 4.469-5.996 7.474-11.002 7.474-5.438 0-10.298-3.548-11.82-8.628-0.19-0.635 0.164-1.304 0.792-1.496 0.624-0.193 1.29 0.166 1.48 0.8 1.222 4.076 5.148 6.924 9.548 6.924 4.128 0 7.481-2.436 8.838-6.126l-2.372 1.199c-0.588 0.298-1.3 0.056-1.592-0.536s-0.055-1.313 0.53-1.609l4.748-2.401c0.589-0.296 1.301-0.055 1.594 0.538l2.374 4.8c0.294 0.593 0.055 1.314-0.53 1.61zM25.259 10.126c-0.626 0.191-1.291-0.167-1.481-0.802-1.223-4.076-5.148-6.924-9.547-6.924-4.132 0-7.486 2.437-8.842 6.127l2.375-1.201c0.588-0.296 1.301-0.055 1.592 0.538 0.294 0.593 0.056 1.314-0.53 1.61l-4.748 2.399c-0.17 0.086-0.352 0.127-0.529 0.127-0.437 0-0.856-0.242-1.063-0.662l-2.375-4.801c-0.293-0.593-0.055-1.314 0.532-1.61 0.589-0.296 1.3-0.055 1.592 0.538l0.994 2.008c1.759-4.468 5.994-7.471 11.003-7.471 5.436 0 10.296 3.548 11.819 8.628 0.191 0.635-0.164 1.304-0.791 1.498z"}))},T=a("nQD+"),C=a("+Kbs"),S=a("fsHk"),M=a("Tr4L"),R=function MessageFooter(e){var t=e.message,a=e.isLastGroup,n=e.isLastMessage,r=e.delivered,c=e.generated,o=e.messageTimedOut,u=e.deliveryFailed,d=e.resolveMessageHeight,m=Object(M.a)().t,f=Object(b.useState)(!1),g=Object(i.a)(f,2),v=g[0],h=g[1];return Object(b.useEffect)(function(){return(o||r)&&Object(j.e)(function(){return h(!1)},500),r||v||h(!0),function(){return h(!1)}},[r,o,v]),Object(b.useLayoutEffect)(function(){d()},[d,r,v,a,n,u]),!r||v?p.a.createElement("li",{key:"".concat(c,"-message-status"),className:s()("drift-widget-message drift-widget-message--meta-date drift-no-op",{"drift-widget-message-failed-status":u})},p.a.createElement("span",{"aria-live":u?"polite":"off",className:"drift-widget-message--meta-status"},!v&&u?m("status.sendMessageFailed"):p.a.createElement(l.a,{size:"small",className:"drift-widget-message--meta-status__sending"}))):a||r?n&&a?p.a.createElement("li",{key:"".concat(t.createdAt,"-message-status"),className:"drift-widget-message--meta-date drift-widget-message"},p.a.createElement("div",{className:"drift-widget-message--meta-status"},p.a.createElement(C.i,{className:"drift-widget-message-sent",height:10,width:12}),p.a.createElement("span",{className:"drift-widget-message--meta-date-stamp"},S.a.unixFormatDateTime(r,m("dt.format.time.short"))))):null:p.a.createElement("li",{key:"".concat(c,"-message-status"),className:"drift-widget-message drift-widget-message--meta-date drift-no-op"})},I=a("QtlZ"),L=a("lE29"),x=a("da4L"),D=a("g6eD"),B=a("LVcX"),P=a("PjZB"),F=60;function process(e){var t=null,a=null,n=!1,r=e.getAttribute("data-giffer-alt"),c=document.createElement("canvas"),i=e.getAttribute("data-giffer-duration"),o=e.getAttribute("data-giffer");e.style.display="block",e.onload=function(){if(c.getContext&&c.getContext("2d")){var s=e.width,l=e.height,u=function createContainer(e,t){var a=document.createElement("button"),n=e.getAttribute("class"),r=e.getAttribute("id"),c=["width:"+F+"px","height:"+F+"px","border-radius:"+F/2+"px","background:rgba(0, 0, 0, 0.3)","position:absolute","top:50%","left:50%","margin:-"+F/2+"px"].join(";"),i=["width: 0","height: 0","border-top: 14px solid transparent","border-bottom: 14px solid transparent","border-left: 14px solid rgba(0, 0, 0, 0.5)","position: absolute","left: 26px","top: 16px"].join(";");n&&a.setAttribute("class",e.getAttribute("class")),r&&a.setAttribute("id",e.getAttribute("id")),a.setAttribute("style","position: relative; cursor: pointer; background: none; border: none; padding: 0;"),a.setAttribute("aria-label","Click to play or pause GIF animation for ".concat(t));var o=document.createElement("div");o.setAttribute("class","giffer-play-button"),o.setAttribute("style",c);var s=document.createElement("div");return s.setAttribute("style",i),o.appendChild(s),a.appendChild(o),e.parentNode.replaceChild(a,e),{c:a,p:o}}(e,r),d=u.c,m=u.p,f=function calculatePercentageDim(e,t,a,n,r){var c=e.parentNode.offsetWidth,i=n/r;return t.toString().indexOf("%")>0?a=(t=(t=parseInt(t.toString().replace("%","")))/100*c)/i:a.toString().indexOf("%")>0&&(t=(a=(a=parseInt(a.toString().replace("%","")))/100*c)*i),{w:t,h:a}}(d,s,l,e.width,e.height);d.addEventListener("click",function(){clearTimeout(t),n?(n=!1,d.appendChild(m),d.removeChild(a),d.appendChild(c),a=null):(n=!0,(a=document.createElement("img")).setAttribute("style","width:100%;height:100%;"),a.setAttribute("data-uri","".concat(Math.floor(1e5*Math.random())+1)),setTimeout(function(){a.src=o},0),d.removeChild(m),d.removeChild(c),d.appendChild(a),parseInt(i)>0&&(t=setTimeout(function(){n=!1,d.appendChild(m),d.removeChild(a),d.appendChild(c),a=null},i)))}),c.width=f.w,c.height=f.h,c.getContext("2d").drawImage(e,0,0,f.w,f.h),d.appendChild(c),d.setAttribute("style","position:relative;cursor:pointer;width:"+f.w+"px;height:"+f.h+"px;background:none;border:none;padding:0;"),c.style.width="100%",c.style.height="100%",s.toString().indexOf("%")>0&&l.toString().indexOf("%")>0?(d.style.width=s,d.style.height=l):s.toString().indexOf("%")>0?(d.style.width=s,d.style.height="inherit"):l.toString().indexOf("%")>0?(d.style.width="inherit",d.style.height=l):(d.style.width=f.w+"px",d.style.height=f.h+"px")}},e.src=o}var U=a("EQxi"),G=function LazyCard(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.a;return function(a){return p.a.createElement(b.Suspense,{fallback:p.a.createElement(t,null)},p.a.createElement(e,a))}},_=function(){return p.a.createElement("div",{className:"drift-widget-message--box--loader"},p.a.createElement(l.a,null))},H=a("q+cq"),V=(a("CHQR"),function DefaultMessage(e){var t=e.body;return p.a.createElement("div",{className:"drift-widget-message--box drift-widget-message--STRING"},t)}),z=a("9Xg1"),K={BOT:G(Object(b.lazy)(function(){return a.e(36).then(a.bind(null,"qfyu"))}),_),CONVO_RATING:G(Object(b.lazy)(function(){return a.e(37).then(a.bind(null,"6lGB"))}),_),EMAIL_CAPTURE:G(Object(b.lazy)(function(){return a.e(38).then(a.bind(null,"ZJQa"))}),_),HTML:z.default,LEGACY:G(Object(b.lazy)(function(){return Promise.resolve().then(a.bind(null,"9Xg1"))}),_),MEETING:G(Object(b.lazy)(function(){return a.e(31).then(a.bind(null,"c+1e"))}),function(){return p.a.createElement(H.a,{loadingFrame:!0},p.a.createElement(l.a,null))}),SMS_CAPTURE:G(Object(b.lazy)(function(){return a.e(39).then(a.bind(null,"vYZB"))}),_),SMS_SUCCESS:G(Object(b.lazy)(function(){return a.e(34).then(a.bind(null,"oqPC"))}),_),STRING:V},Q=a("UXBQ"),X=a("vDqi"),Z=a.n(X),W=function FileAttachmentMessage(e){var t=e.attachment,a=void 0===t?{}:t,n=e.multi,r=e.senderType,c=void 0===r?P.d.END_USER:r,i=Object(L.a)(),o=i.buttonStyles,s=i.svgStyles,l=i.agentIconTheme;if(!a.fileName)return null;var u=c===P.d.END_USER?s:l;return p.a.createElement(p.a.Fragment,null,p.a.createElement("a",{href:a.publicUrl,target:"_blank",rel:"nofollow noopener noreferrer",className:"drift-widget-message--file",style:n?o:{},"aria-label":"Download file: ".concat(a.fileName)},p.a.createElement(C.k,{fill:u.fill,width:16,height:16}),p.a.createElement("span",{className:"drift-widget-attachment--filename",title:a.fileName},a.fileName)))},q=function ImageAttachmentMessage(e){var t=e.attachment,a=void 0===t?{}:t,n=e.resolveMessageHeight,r=void 0===n?function(){}:n,c=Object(b.useState)(!1),o=Object(i.a)(c,2),s=o[0],l=o[1];return p.a.createElement(p.a.Fragment,null,p.a.createElement("a",{href:a.publicUrl,className:"drift-widget-attachment--img",target:"_blank",rel:"nofollow noopener noreferrer","aria-label":"download file"},p.a.createElement("img",{src:a.publicUrl,alt:a.fileName,onLoad:function onLoad(){!s&&r(),!s&&l(!0)}})))},J=(a("Qp3a"),function AttachmentMessage(e){var t=e.attachmentIds,a=void 0===t?[]:t,n=e.resolveMessageHeight,i=e.sentFrom,o=void 0===i?P.d.END_USER:i,l=Object(v.b)(),u=Object(v.c)(function(e){return e.conversations.attachments}),d=Z.a.CancelToken.source(),f=Object(L.a)(),g=f.agentMessageTheme,j=f.endUserMessageTheme,h=o===P.d.END_USER?j:g;Object(b.useEffect)(function(){var e=a.filter(function(e){return!u[e]}),t=function(){var t=Object(c.a)(r.a.mark(function _callee(){var t,a;return r.a.wrap(function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(Q.a)(e,d.token);case 3:t=n.sent,a=t.data,l(Object(m.e)({attachments:a})),n.next=10;break;case 8:n.prev=8,n.t0=n.catch(0);case 10:case"end":return n.stop()}},_callee,null,[[0,8]])}));return function fetchAttachmentsForMessage(){return t.apply(this,arguments)}}();return e.length&&t(),function(){d.cancel()}},[u,a,d,l]);var O=Object(b.useMemo)(function(){return a&&a.map(function(e){return u[e]?function isImage(e){var t=e.mimeType;return/image/.test(t)&&"image/svg+xml"!==t}(u[e])?p.a.createElement(q,{attachment:u[e],key:"drift-widget-attachment--".concat(e),resolveMessageHeight:n}):p.a.createElement(W,{multi:a.length>1,attachment:u[e],key:"drift-widget-attachment--".concat(e),senderType:o}):null})},[a,u,n,o]);return p.a.createElement("div",{style:h,className:s()("drift-widget-attachment drift-widget-message--box",{"drift-widget-attachment--multi":a&&a.length>1})},O)}),Y=(a("mQ2C"),function UnfurlMessage(e){var t=e.unfurlData,a=e.style,n=void 0===a?{}:a,r=e.resolveMessageHeight,c=void 0===r?function(){}:r,i=e.sender,o=t.html,l=t.meta,u=void 0===l?{}:l,d=t.links,m=void 0===d?{}:d,f=t.url,g=void 0===f?"":f,j=t.rel,h=void 0===j?[]:j,O=Object(v.b)();Object(b.useLayoutEffect)(function(){c(),O(Object(D.a)(!0))},[c,o,O]);var E=Object(b.useMemo)(function(){return!!u.title||!!u.description||!!u.site},[u]),w=Object(b.useMemo)(function(){return Object(B.a)(null,["thumbnail",0],m)},[m]),y=Object(b.useMemo)(function(){return Object(B.a)(g,["site"],u)},[g,u]),A=Object(b.useMemo)(function(){return h[0]},[h]),k=Object(b.useMemo)(function(){return"player"===A},[A]),N=Object(b.useMemo)(function(){return!k&&w},[k,w]);return Object(b.useMemo)(function(){return(N||k)&&E},[N,k,E])?p.a.createElement("li",{className:"drift-widget-message drift-widget-message--unfurl drift-widget-message-sender--".concat(i)},p.a.createElement("div",{className:s()("drift-widget-message--box drift-widget-message--unfurl-container"),style:n},k&&p.a.createElement("div",{className:"drift-widget-message--unfurl-video",dangerouslySetInnerHTML:{__html:o}}),N&&p.a.createElement("div",{className:"drift-widget-message--unfurl-image"},p.a.createElement("a",{href:g,target:"_blank",rel:"nofollow noopener noreferrer","aria-label":"click to go to ".concat(g)},p.a.createElement("img",{alt:"".concat(y," - thumbnail"),src:w.href,onLoad:function onLoad(){O(Object(D.a)(!0))}}))),E&&p.a.createElement("div",{className:"drift-widget-message--unfurl_meta"},u.title&&p.a.createElement("h3",{className:"drift-widget-message--unfurl_title"},p.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:g,title:u.title},u.title)),u.description&&p.a.createElement("p",{className:"drift-widget-message--unfurl_description"},u.description),u.site&&p.a.createElement("p",{className:"drift-widget-message--unfurl_site"},u.site)))):null}),$=(a("ZP32"),function MessageSentTimestamp(e){var t=e.sender,a=e.deliveredAt,n=Object(M.a)().t;return p.a.createElement("span",{className:"drift-widget-message-timestamp drift-widget-message-timestamp--".concat(t)},S.a.unixFormatDateTime(a,n("dt.format.time.short")))}),ee=function MessageComponent(e){var t=e.message,a=e.nextMessage,n=e.isLastGroup,r=e.isLastMessage,c=e.resolveMessageHeight,o=Object(b.useState)([]),l=Object(i.a)(o,2),u=l[0],d=l[1],f=Object(b.useState)(null),g=Object(i.a)(f,2),h=g[0],E=g[1],w=Object(v.b)(),y=Object(b.useRef)(),A=Object(v.c)(function(e){return Object(B.a)(!1,["embed","configuration","theme","showUnfurl"],e)}),C=Object(L.a)(),M=C.borderStyles,F=C.endUserMessageTheme,G=C.agentMessageTheme,_=function resolveMessageComponent(e){var t=e.attributes,a=t.isBot,n=void 0!==a&&a,r=t.show_email_capture_card,c=t.conversationRating;return r?K.EMAIL_CAPTURE:Object(x.i)(e)?K.MEETING:n?K.BOT:c?K.CONVO_RATING:Object(x.k)(e)?K.SMS_CAPTURE:Object(x.l)(e)?K.SMS_SUCCESS:K.HTML}(t),H=Object(x.h)(t)?P.d.END_USER:P.d.AGENT;Object(b.useEffect)(function(){!function processGifsForAnimationControl(e){if(e)for(var t=e.querySelectorAll("[data-giffer]"),a=0;a<t.length;++a)process(t[a])}(null===y||void 0===y?void 0:y.current)},[y]),Object(b.useEffect)(function(){if(!Object(x.e)(t,"instantMeeting")){var e=Object(U.a)(t.body);e.length&&d(e)}},[t]),Object(b.useEffect)(function(){if(u.length>0){var e=document.createElement("textarea");e.innerHTML=u[0],k(e.value.replace("#61;","")).then(function(e){var t=e.data;E(Object(O.a)(Object(O.a)({},t),{},{url:u[0]}))}).catch(function(e){return Object(j.n)({data:["Failed to unfurl url: ".concat(u[0]),e]})})}},[u]),Object(b.useLayoutEffect)(function(){c(),I.a.dispatch(Object(D.a)(!0))},[c,n]);var V=!!t.attributes.appointmentInfo||!!t.attributes.conversationRating||t.type===P.e.EMAIL_CAPTURE_CARD||t.contentType===P.c.SMS_NUMBER_REQUESTED||t.contentType===P.c.SMS_NUMBER_SUCCESS,z=!!t.body||V,Q=A&&h,X=t.attachments&&t.attachments.length>0;if(!z&&!Q&&!X)return null;var Z=Object(B.a)(null,["createdAt"])(t),W=Object(B.a)(null,["attributes","generatedAt"])(t),q=!Z&&S.a.isTimeAfterSeconds(S.a.getCurrentTimeEpoch(),W,30),ee=!Z&&q;return p.a.createElement(p.a.Fragment,null,z&&p.a.createElement("li",{className:s()("drift-widget-message drift-widget-message-sender--".concat(H),{"drift-widget-message-failed":ee}),ref:y},p.a.createElement(_,Object.assign({},t,{isLastGroup:n,isLastMessage:r,nextMessage:a,resolveMessageHeight:c,style:H===P.d.END_USER?F:G})),!V&&Z&&p.a.createElement($,{sender:H,deliveredAt:Z}),ee&&p.a.createElement(T.a,{onClick:function doSendMessage(){w(Object(m.m)({message:Object(O.a)(Object(O.a)({},t),{},{attributes:Object(O.a)(Object(O.a)({},t.attributes),{},{generatedAt:(new Date).valueOf()})})}))}},p.a.createElement(N,{height:12,width:12}))),Q&&p.a.createElement(Y,{unfurlData:h,resolveMessageHeight:c,style:H===P.d.END_USER?Object(O.a)({},M):{},sender:H}),X&&p.a.createElement("li",{className:"drift-widget-message drift-widget-message-sender--".concat(H)},p.a.createElement(J,{attachmentIds:t.attachments,resolveMessageHeight:c,sentFrom:H}),p.a.createElement($,{sender:H,deliveredAt:Z})),p.a.createElement(R,{message:t,isLastGroup:n,isLastMessage:r,delivered:Z,generated:W,messageTimedOut:q,deliveryFailed:ee,resolveMessageHeight:c}))},te=a("yEsl"),ae=a("7IKl"),ne=(a("UwV1"),function getAvatarPositionClassName(e){var t=Object(x.i)(e),a=e.attributes.show_email_capture_card;return"message-group-avatar-".concat(void 0!==a&&a||t?"top":"bottom")}),re=function MessageGroupHeader(e){var t=e.senderType,a=e.senderId,n=Object(ae.a)(a),r=Object(L.a)().messageAuthorTheme;return t!==P.d.AGENT?null:p.a.createElement("li",{className:"drift-widget-message-sender"},p.a.createElement("span",{className:"drift-widget-message--meta-author",style:r},n))},ce=function MessageGroup(e){var t=e.messages,a=void 0===t?[]:t,n=e.isLastGroup,r=void 0!==n&&n,c=e.showTimestamp,o=void 0!==c&&c,l=e.role,u=void 0===l?"cell":l,d=e.resolveMessageHeight,m=void 0===d?function(){}:d,f=Object(M.a)().t,g=Object(L.a)().messageTimestampTheme;Object(b.useLayoutEffect)(function(){m()},[m,r,o]);var v=Object(i.a)(a,1)[0],j=Object(x.h)(v)?P.d.END_USER:P.d.AGENT,O=v.authorId,E=a[a.length-1],w=r&&Object(x.e)(E,"buttons");return p.a.createElement("div",{role:u,className:s()("drift-widget-message-group-wrapper",{"drift-widget-message-group-wrapper--last":r})},o&&p.a.createElement("p",{className:"drift-widget-message-group-timestamp",style:g},function formatTimestamp(e,t){return e>0?S.a.isTimeSame(e,"date")?"".concat(t("dt.today")," ").concat(S.a.unixFormatDateTime(e,t("dt.format.time.short"))):S.a.unixFormatDateTime(e,t("dt.format.datetime.short")):""}(a[0].createdAt,f)),p.a.createElement("ul",{className:"drift-widget-message-group drift-widget-message-group-type--".concat(j)},p.a.createElement(re,{senderType:j,senderId:O}),a.map(function(e,t){var n=t===a.length-1,c=n?null:a[t+1];return p.a.createElement(b.Fragment,{key:e.attributes.generatedAt||e.id||e.attributes.widgetGuid},n&&j===P.d.AGENT&&p.a.createElement("li",{className:s()("drift-widget-message-group-avatar",ne(e))},p.a.createElement(te.a,{id:O,size:"SMALL"})),p.a.createElement(ee,{resolveMessageHeight:m,message:e,nextMessage:c,isLastMessage:n,isLastGroup:r}))})),w&&p.a.createElement(h,{message:E}))},ie=a("gRD2"),oe=a("6wvX"),se=a("fJrp"),le=a("7VeV"),ue=function useScroll(e,t){var a=Object(b.useRef)(),n=Object(b.useMemo)(function(){return Object(le.throttle)(250,!1,function(e){a.current&&a.current(e)})},[a]);Object(b.useEffect)(function(){a.current=e},[e]),Object(b.useEffect)(function(){var e=t.current;if(e)return e.addEventListener("scroll",n),function(){e&&e.removeEventListener("scroll",n)}},[t,n])},de=a("qixE"),me=a("xwTo"),fe=a("TbSn"),ge=a("mfas"),be=a("XuDI"),pe=(a("P6Di"),function shouldShowTimestamp(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e&&!a)return!1;if(!e)return!0;var n=e?e[e.length-1].createdAt:0;return S.a.isTimeAfterHours(t[0].createdAt,n,2)}),ve=function setScrollTop(e,t,a){if(e.scrollTop!==t){var n=e.style;a&&(n["-webkit-overflow-scrolling"]="auto",n.overflow="hidden"),e.scrollTop=t,a&&(n.overflow="scroll",n["-webkit-overflow-scrolling"]="touch")}};t.a=function MessageGroupList(e){var t=e.reflowHidden,a=e.messageGroups,n=e.messages,o=e.disabled,u=void 0!==o&&o,d=e.inheritBackgroundStyle,m=void 0!==d&&d,f=e.showTimestampForFirstGroup,g=void 0===f||f,h=Object(v.b)(),O=Object(L.a)().widgetBackgroundStyles,E=Object(v.c)(me.a),w=Object(ie.a)().fetchMessages,y=Object(v.c)(function(e){return e.view}),A=y.chatOpen,k=y.shouldAutoScrollChatToBottom,N=Object(v.c)(function(e){return Object(B.a)({},["conversations","conversations",E],e)}),T=N.hasMoreMessages,C=N.nextPageMessageId,S=Object(oe.a)(),M=Object(b.useState)(!0),R=Object(i.a)(M,2),I=R[0],F=R[1],U=Object(b.useState)(!1),G=Object(i.a)(U,2),_=G[0],H=G[1],V=Object(b.useState)(!1),z=Object(i.a)(V,2),K=z[0],Q=z[1],X=Object(b.useState)(!1),Z=Object(i.a)(X,2),W=Z[0],q=Z[1],J=Object(b.useRef)(null),Y=Object(b.useRef)(0),$=Object(b.useRef)(!1),ee=Object(b.useMemo)(function(){return Object(fe.a)(n)},[n]),te=Object(se.a)(ee),ae=!!te&&ee!==te,ne=a.length,re=!_&&T&&A,le=Object(b.useMemo)(function(){return a.map(function(e,t){var n=t===a.length-1,r=t>0?a[t-1]:null,c=e[0].attributes.widgetGuid||e[0].id;return p.a.createElement(ce,{key:"messageGroup-".concat(c),role:"listitem",messages:e,isLastGroup:n,showTimestamp:pe(r,e,g)})})},[a,g]),je=Object(b.useCallback)(function(){var e=Object(c.a)(r.a.mark(function _callee(e){return r.a.wrap(function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return H(!0),Q(!0),t.next=4,w({from:e});case 4:q(!0),H(!1),Object(j.e)(function(){return Q(!1)},1e3);case 7:case"end":return t.stop()}},_callee)}));return function(t){return e.apply(this,arguments)}}(),[w]),he=Object(b.useCallback)(function(e){e.target.scrollTop<=200&&re&&!W&&je(C)},[je,C,re,W]),Oe=m?{}:O;ue(he,J),Object(b.useLayoutEffect)(function(){if(!(ne<1)){if(!A||_||t)!A&&ae&&($.current=!0);else{var e=Object(B.a)(0,["current","scrollHeight"],J),a=Y.current,n=ae||I||$.current||k;J.current&&(n?(ve(J.current,e,S),$.current=!1):W&&ve(J.current,e-a,S)),(n||W)&&(Y.current=e),F(!1),q(!1)}k&&h(Object(D.a)(!1))}},[ne,A,I,_,ae,W,t,S,a,k,h]),Object(b.useEffect)(function(){q(!1),F(!0)},[E]),Object(b.useEffect)(function(){ee&&A&&ee.viewerRecipientStatus!==P.f.READ&&!Object(x.h)(ee)&&Object(de.c)(E)},[ee,E,A]);return p.a.createElement("div",{className:"drift-widget-message-group-list-container","aria-hidden":u},p.a.createElement("div",{style:Oe,className:s()("drift-widget-message-group-list-loader",{"drift-widget-message-group-list-loader--loading":K})},p.a.createElement(l.a,{visible:K})),p.a.createElement(be.Scrollbars,{ref:function setScrollContainerRef(e){e&&J&&(J.current=e.view)},hideTracksWhenNotNeeded:!0,renderView:function renderScrollbarsView(e){var a=Object(ge.a)(["WebkitOverflowScrolling"],e.style);return p.a.createElement("div",Object.assign({},e,{role:"list",style:a,className:s()("drift-widget-message-group-list",{"drift-widget-message-group-list--hidden":t})}))}},le))}},"97O6":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAAAWCAYAAACFbNPBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABa9JREFUeNrsWy1z40gQla8EDAwEDAQCDAIMAgwCDA0XBgYGBu5PyM84aLgw8KDBAoMDBgsEAgQEBAQEBARclZ2uepPrne2WRrbls7PqKpWc0UxPz0y//pIyen9/Dwa6LhqNRjNzmwmPcnOl5kzrYZdOQ+GwBVcDirG5LXGNG7rWpu/O3DcuUEz7ytxW7gDT76WtjzYXAdJcW8MjFWR+EoBMAF4ra3wRmmkdG/Psq/kdac8Vfg/mtpAMiRnzt88C/xpU7yrAEZvbMxR33NLdAukZ4/okmmturicz1yNA3Be9Ku0rM2+keNlFR14DQK4UHE+K9Wwi6v94RlHnfc4HD5Uojx8826zHyQeAfJ6w6tHDa2jhz7czizwzMi969iK1Mu/cCRMjJbTa9JKDSG7M0N5MWDn9iOeUHWpl+hTs2UQZF6HvnrVNIGMFfpq8ltdEUhQeiyvr+FgLm1Pl0WVvWtb8sT6+bkZL5aBJli1ZVLKGmN+GFDM8X3exlB6UCh4qUmTe9eRFKL96VTzVF/MshZ6sjg2tDknSF4pyECoTduALl69pr3CYpDB3aP7OnhOgqP3NXBkbeocFU9/bhjBj1yJjwpRFs3Al+IjzGB6Z4fHWdW+wJlpHaP7eWqBBqRdQ5n8VvksFHL8ov/ltZd8ZvkskwvmJlXMteLdnYa96zXtI1wCEmQDYZSBX9zqHVodWsSocuCVSphiKUDNFIcAU4B9D6DkUocCYqfUs8Dh2czN2AHQVZF3N3y4YXLms98hx2fXRvHMzvmBWmvf5sPgK6EiGG7pIhgaQuDxv2XoSgGTO+N7avZK8B5JMKbT6p+mgzbPtOWIpWPNdh4rXqUOtZ2F/NFnSrqHVoQDZw1rZQ3wDKCLwCq3bZ0qXQtljeIoMijMFWDhAJtQXVta2Fc7BlIq15uEQlzEDQCfwEr/1URSAP6cw5h4gyZRwy503tyAgQ0AApTUh6R5DnqxBDs0SJk6s3aagaln1RFWsQ/KUlyPBWRoepPBfPHOx10PnOvY9CB8/gfC5Yl1JMSZQlg8AADQhlDdCuwXR3uUHyypVODSaCB4iEviULaDJ4AHGSqIYO7lIBABUTLGXAE0Y/PcOoQvll/ISsKGMehb5yFMiMZ+1dN20GcNTAmTMFCtk8WbeUoasBcDMAI4pU6B7KFoBxc49LWuqKKpNgksnQZYSzJR5GNF7dtiniAExpBAKYaINtYh+KIl50GEfzwkIX6ufnDnU+triPY8KOTsDxFHQGiEVxaN7mzsIVi5ylCwHHwuQCjwKgO5GCq9gOXxjSQuOTLDUaYvXkWjqYd1TVqy4gww3dn54z0AArC/FweXT9lwTsVBrderQ6lCA0MFqJbwCSnSLqpEFTMhAVbAEr2IHnrHnFiA1S+K7hiEpqxJFx26S4XUDuWpPd73HAR3zZrlWPHjMwk4C3sYzUT2LRfeoFNVKZBB4hEsSSDbIxX6rbB4TWp0qB+GC2no8KdK9+V2Cv03g3Y/obEzPgWPzk7HkPaCsUtz7pliXBHMsqOLCQppYeHdR8QoVm8d6Ihr7o8m6C6Fd0BK2NSbXSjslpmuWe6XO/vwfAClRXUs8Ddj6yDDubOFo2HETqhaQJCwBj9m4TPAGBZ6VTiyeYbxrZdpCkj341Q5oQyZP5qGwlfB3hTXUDXvjjtkrVarSYy1W9lLwgJS7PZjnr4KC9fktVKq05Z7AuEryBkhDaCVVlFKPfqRAO6E9C359WWjb3zymb+XXtg7PeQ7am659ET5J3xQtUCxJmEGImUfuI95fB38gDZ+7XzARmPBmPFYqZctLrnx9Bho+Vrx8WjcktT7g2AxbOADkM3uRGiDpGucTqE79weIQYg10sSD5xt5ezwL9K1/K/xIl1yk98kOfPl1A6tPWVAjwqQIeOq6VRsP/pF8vOZ/L5MP/ovewxwNABhpIp58CDAChjQWETVMlnAAAAABJRU5ErkJggg=="},"9Xg1":function(e,t,a){"use strict";a.r(t);var n=a("nfbA"),r=a("O94r"),c=a.n(r),i=a("58kB"),o=a("4bA0"),s=a.n(o),l=a("da4L"),u=a("ERkP"),d=a.n(u),m=a("oPI6"),f=a("PjZB"),g=a("y0on"),b=a("EQxi"),p=/[/.](gif)$/i,v=function HtmlMessage(e){var t=e.body,a=e.attributes,r=e.isLastMessage,l=e.authorId,v=e.isLastGroup,j=e.style,h=void 0===j?{}:j,O=e.resolveMessageHeight,E=void 0===O?function(){}:O,w=e.className,y=e.viewerRecipientStatus,A=e.authorType;Object(u.useLayoutEffect)(function(){E()},[E,t]);var k=Object(i.a)(l),N=Object(u.useMemo)(function(){return{parsedBody:s()(t,{replace:function replace(e){if("img"===e.name){var t,a,r,c,i=null!==(t=null===(a=e.attribs)||void 0===a?void 0:a.alt)&&void 0!==t?t:"",l=null!==(r=null===(c=e.attribs)||void 0===c?void 0:c.src)&&void 0!==r?r:"",u=new RegExp(p).test(l),m=Object(n.a)(Object(n.a)({},Object(o.attributesToProps)(e.attribs)),{},{onLoad:E});return u&&(m["data-giffer"]=l,m["data-giffer-alt"]=i),d.a.createElement("img",m)}if("text"===e.type){if(e.parentNode&&"a"!==e.parentNode.name){var f=Object(b.e)(e.data);return d.a.createElement(d.a.Fragment,null,s()(f))}}else if("a"===e.name){var g={href:e.attribs.href,target:"_blank",rel:"noopener noreferrer"};return d.a.createElement("a",g,Object(o.domToReact)(e.children))}}})}},[t,E]).parsedBody,T=r&&v&&A===f.b.USER&&y!==f.f.READ,C=T?Object(g.a)(k.recipient.name,a&&""!==a.preview?a.preview:t):null;return d.a.createElement("div",{className:c()("drift-widget-message--box drift-widget-message--HTML",w),style:h},T&&d.a.createElement(m.b,{message:C,"aria-live":"polite",clearOnUnmount:!0}),d.a.createElement("div",null,N))};t.default=function(e){return Object(l.g)(e.body)?null:d.a.createElement(v,e)}},"9wXn":function(e,t,a){},Adtm:function(e,t,a){},BY8A:function(e,t,a){"use strict";var n=a("s8DI"),r=a("ERkP"),c=a.n(r),i=a("uDfI"),o=a("rTkt");a("zoZM");t.a=function ThemeStyleSheets(){var e=Object(r.useState)(!1),t=Object(n.a)(e,2),a=t[0],s=t[1],l=Object(i.c)(function(e){return e.embed});return Object(r.useEffect)(function(){a||(Object(o.a)(l),Object(o.b)(l),s(!0))},[l,a]),c.a.createElement("div",{className:"drift-widget-preload-fonts","aria-hidden":"true"},c.a.createElement("span",null,"A"),c.a.createElement("strong",null,"B"))}},CHQR:function(e,t,a){},CwrG:function(e,t,a){"use strict";var n=a("nJ3u"),r=a("O94r"),c=a.n(r),i=a("+Kbs"),o=a("z24s"),s=a("lE29"),l=a("SFoa"),u=a("LVcX"),d=a("ERkP"),m=a.n(d),f=a("TVEO"),g=a("uDfI"),b=(a("p0+K"),function Drift(){var e=Object(d.useRef)(null),t=Object(o.a)(e),a=Object(s.a)().footerTextColor,n=Object(u.a)("",["context","page","hostname"],Object(g.c)(function(e){return e.session})),r=Object(d.useMemo)(function(){return Object(l.g)()<=1?"":"?utm_source=".concat(n,"&utm_medium=web-widget&utm_campaign=widget-referral&utm_version=v2")},[n]);return m.a.createElement("a",{href:"https://www.drift.com/powered-by".concat(r),className:c()("drift-widget-power",{"keyboard-focused":t}),rel:"noopener noreferrer",target:"_blank",ref:e,style:a},m.a.createElement(f.a,{i18nKey:"composer.footer.poweredByDrift",components:[m.a.createElement(i.c,{height:12,width:12}),m.a.createElement("span",{className:"drift-widget-power-brand"},"Drift")]}))}),p=a("VkHq"),v=a("Hvhg");a("2VrW"),t.a=function Footer(){var e=Object(g.c)(v.c).showBranding,t=void 0!==e&&e,a=Object(p.a)(),r=a.privacyPolicyLink,i=a.privacyPolicyLinkText,l=a.noPolicy,u=Object(s.a)(),f=u.activeColor,j=u.footerTextColor,h=Object(d.useRef)(null),O=Object(o.a)(h);return!t&&l?null:m.a.createElement("div",{className:c()("drift-widget-footer",{"drift-widget-footer--with-branding":t})},m.a.createElement("style",null,"\n          .drift-widget-power.keyboard-focused,\n          .drift-widget-footer--with-branding .drift-widget-footer-privacy.keyboard-focused {\n            ".concat(Object(n.e)(f),"\n          }\n        ")),t&&m.a.createElement(b,null),t&&!l&&m.a.createElement("span",{className:"drift-widget-footer-privacy-spacer","aria-hidden":"true",style:j},"|"),!l&&m.a.createElement(m.a.Fragment,null,m.a.createElement("span",{className:c()("drift-widget-footer-privacy",{"keyboard-focused":O})},m.a.createElement("a",{href:r,rel:"noopener noreferrer",target:"_blank",title:i,className:"drift-widget-footer-privacy--link",ref:h,style:j},i))))}},I4Wp:function(e,t,a){},IuzP:function(e,t,a){},JhcM:function(e,t,a){},Jrg8:function(e,t,a){},Lzfp:function(e,t,a){"use strict";var n=a("jm9a"),r=a("O94r"),c=a.n(r),i=a("+Kbs"),o=a("ERkP"),s=a.n(o),l=(a("eSyn"),function SearchLabel(e){var t=e.ariaLabel,a=void 0===t?"":t,r=e.ariaLabelledBy,o=void 0===r?"":r,l=e.className,u=void 0===l?"":l,d=e.htmlFor,m=void 0===d?"":d;return s.a.createElement("label",{"aria-label":a,"aria-labelledby":o,className:c()("drift-widget--search-label",Object(n.a)({},u,!!u)),htmlFor:m},s.a.createElement(i.o,{titleId:o,title:a,width:12,height:12}))});a.d(t,"a",function(){return l})},Mur8:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n=[{emoji:"\ud83d\ude20",value:1},{emoji:"\ud83d\ude41",value:2},{emoji:"\ud83d\ude10",value:3},{emoji:"\ud83d\ude0a",value:4},{emoji:"\ud83d\ude0d",value:5}]},P6Di:function(e,t,a){},"PGb/":function(e,t,a){},Q80r:function(e,t,a){},Qp3a:function(e,t,a){},RJSH:function(e,t,a){},Sn8X:function(e,t,a){"use strict";var n=a("LVcX"),r=a("ERkP"),c=a("Tr4L"),i=a("uDfI"),o=a("0lfv"),s=a("VpmR");t.a=function useLanguageSwitcher(){var e=Object(c.a)().i18n,t=Object(i.c)(function(e){return Object(n.a)("en",["embed","configuration","locale"],e)});Object(r.useEffect)(function(){e&&Object(o.k)(e.changeLanguage)&&e.changeLanguage(Object(s.c)(t))},[e,t])}},UXBQ:function(e,t,a){"use strict";a.d(t,"b",function(){return r}),a.d(t,"a",function(){return c});var n=a("efbE"),r=function uploadAttachment(e,t){var a=new FormData;return a.append("conversationId",t),a.append("file",e),n.a.post("/attachments",a)},c=function fetchAttachments(e,t){return n.a.get("/attachments",{params:{id:e},cancelToken:t})}},UwV1:function(e,t,a){},ZGTz:function(e,t,a){"use strict";var n=a("mj2O"),r=a.n(n),c=a("7SM1"),i=a("s8DI"),o=a("O94r"),s=a.n(o),l=a("HXmn"),u=a("LVcX"),d=a("ERkP"),m=a.n(d),f=a("Tr4L"),g=a("uDfI"),b=a("oFTC"),p=(a("uqJV"),a("Q80r"),Object(d.lazy)(function(){return Promise.all([a.e(8),a.e(41)]).then(a.bind(null,"tBak"))})),v=function EmojiPickerLoader(e){var t=e.loadingText;return m.a.createElement("div",{className:"drift-widget-emoji-picker--loader"},m.a.createElement("p",null,t),m.a.createElement(l.a,null))};t.a=function EmojiPicker(e){var t=e.open,n=e.onAddEmoji,o=e.onClickOutside,l=Object(f.a)().t,j=Object(g.c)(function(e){return e.conversations}).activeConversation,h="en"!==Object(g.c)(function(e){return Object(u.a)("en",["embed","configuration","locale"],e)}),O=Object(d.useMemo)(function(){return function createEmojiMartI18nProp(e){return{search:e("emoji.search"),clear:e("emoji.clear"),notfound:e("emoji.notfound"),skintext:e("emoji.skintext"),categories:{search:e("emoji.category.search"),recent:e("emoji.category.recent"),smileys:e("emoji.category.smileys"),people:e("emoji.category.smileys"),nature:e("emoji.category.nature"),foods:e("emoji.category.foods"),activity:e("emoji.category.activity"),places:e("emoji.category.places"),objects:e("emoji.category.objects"),symbols:e("emoji.category.symbols"),flags:e("emoji.category.flags"),custom:e("emoji.category.custom")},categorieslabel:e("emoji.categorieslabel"),skintones:{1:e("emoji.skintone1"),2:e("emoji.skintone2"),3:e("emoji.skintone3"),4:e("emoji.skintone4"),5:e("emoji.skintone5"),6:e("emoji.skintone6")}}}(l)},[l]),E=Object(d.useRef)(null),w=Object(d.useState)(null),y=Object(i.a)(w,2),A=y[0],k=y[1];Object(d.useEffect)(function(){t&&!A&&function(){var e=Object(c.a)(r.a.mark(function _callee(){return r.a.wrap(function _callee$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.e(44).then(a.t.bind(null,"8ozv",3)).then(function(e){return k(e.default)});case 2:case"end":return e.stop()}},_callee)}));return function fetchEmojiData(){return e.apply(this,arguments)}}()()},[t,A]),Object(b.a)(E,function(e){o(e)});return m.a.createElement("div",{ref:E,className:s()("drift-widget-composer-emoji-picker",{"drift-widget-composer-emoji-picker--open":t,"drift-widget-composer-emoji-picker--full":j,"drift-widget-composer-emoji-picker--mini":!j,"drift-widget-composer-emoji-picker--hide-search":h})},m.a.createElement(d.Suspense,{fallback:m.a.createElement(v,{loadingText:l("status.loading")})},!!A&&m.a.createElement(p,{darkMode:!1,hideSearch:h,onSelect:function addEmojiToMessage(e){var t=e.native;n(function(e){return"".concat(e," ").concat(t)})},sheetSize:64,set:"apple",data:A,exclude:["flags","symbols","objects"],perLine:6,emojiTooltip:!h,i18n:O,showPreview:!1,showSkinTones:!1,onClickOutside:o})))}},ZP32:function(e,t,a){},eSyn:function(e,t,a){},ey6Y:function(e,t,a){"use strict";var n=a("58kB"),r=a("Tr4L");t.a=function useMeetingRecipients(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=Object(r.a)().t,c=Object(n.a)(e).recipient;return c.id?t.length?a("meeting.recipients",{name:c.name,others:t.length}):"".concat(c.name):""}},fTFZ:function(e,t,a){"use strict";var n=a("nfbA"),r=a("WwEg"),c=a("s8DI"),i=a("nJ3u"),o=a("O94r"),s=a.n(o),l=a("7IKl"),u=a("lE29"),d=a("ERkP"),m=a.n(d),f=a("Tr4L"),g=a("uDfI"),b=(a("I4Wp"),function AgentTypingIndicator(){var e=Object(f.a)().t,t=Object(u.a)().widgetBackgroundAlpha,a=Object(g.c)(function(e){return e.conversations.typingIndicators[e.conversations.activeConversation]||{}}),n=a.isTyping,r=void 0!==n&&n,c=a.userId,i=Object(l.a)(c);return r?m.a.createElement("p",{style:t,className:"agent-typing-indicator"},e("status.agentTyping",{agent:i})):null}),p=a("ZGTz"),v=a("mj2O"),j=a.n(v),h=a("7SM1"),O=a("efbE"),E=["en","es","pt","id","fr","ar","tr","th","vi","de","it","ja","zh-CN","zh-TW","ru","ko","pl","nl","ro","hu","sv","cs","hi","bn","da","fa","tl","fi","iw","ms","no","uk"],w=function localeToGiphyLang(e){switch(e){case"de-DE-formal":return"de";case"zh":return"zh-CN";case"zh-HK":return"zh-TW";case"pt-BR":return"pt"}return E.includes(e)?e:"en"},y=function getTrendingGiphys(e){return O.h.get("/trending",{params:{limit:e,rating:"pg"}})},A=function getSearchGiphys(e,t){var a=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).locale;return O.h.get("/search",{params:{limit:t,q:e,lang:w(a),rating:"pg"}})},k=a("Lzfp"),N=a("+Kbs"),T=a("LVcX"),C=function useEmbedLocale(){return Object(g.c)(function(e){return Object(T.a)("en",["embed","configuration","locale"],e)})},S=a("nvPd"),M=a("6wvX"),R=a("z24s"),I=a("97O6"),L=a.n(I),x=a("oFTC"),D=a("0lfv");function resetFocus(e){Object(D.m)(e)||e.focus()}a("Adtm");function GiphyPreview(e){var t,a=e.addGiphyToMessage,n=e.giphy,r=null!==(t=null===n||void 0===n?void 0:n.title)&&void 0!==t?t:"Gif from Giphy";return m.a.createElement("li",{className:"drift-widget-composer-giphy-list-item"},m.a.createElement("button",{className:"giphy-button",onClick:function handleOnClick(){return a(n)}},m.a.createElement("img",{alt:r,className:"giphy-animated",src:n.images.preview_gif.url}),m.a.createElement("img",{alt:r,className:"giphy-still",src:n.images.original_still.url})))}a("RJSH");var B,P,F=function GiphyPicker(e){var t=e.onAddGiphy,a=e.disabled,n=void 0!==a&&a,r=Object(f.a)().t,o=C(),l=Object(d.useState)([]),g=Object(c.a)(l,2),b=g[0],p=g[1],v=Object(d.useState)(!1),O=Object(c.a)(v,2),E=O[0],w=O[1],T=Object(d.useState)(!1),I=Object(c.a)(T,2),B=I[0],P=I[1],F=Object(d.useRef)(null),U=Object(d.useRef)(null),G=Object(d.useRef)(null),_=Object(d.useRef)(null),H=Object(S.a)(""),V=H.value,z=H.onChange,K=Object(M.a)(),Q=Object(R.a)(_),X=Object(R.a)(U),Z=Object(R.a)(G),W=Object(u.a)().activeColor,q=Object(d.useMemo)(function(){return Object(D.d)(function(){var e=Object(h.a)(j.a.mark(function _callee(e){var t,a;return j.a.wrap(function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,A(e,51,{locale:o});case 2:t=n.sent,a=t.data,p(a.data);case 5:case"end":return n.stop()}},_callee)}));return function(t){return e.apply(this,arguments)}}(),200,!1)},[o]),J=Object(d.useCallback)(Object(h.a)(j.a.mark(function _callee2(){var e,t;return j.a.wrap(function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,y(51);case 2:e=a.sent,t=e.data,p(t.data);case 5:case"end":return a.stop()}},_callee2)})),[]);Object(x.a)(F,function(){E&&(w(!1),resetFocus(null===_||void 0===_?void 0:_.current),P(!0))}),Object(d.useEffect)(function(){E&&!K&&U.current.focus(),E&&J()},[E,K,J]),Object(d.useEffect)(function(){E&&(V.length>0?q(V):J())},[V,E,q,J]),Object(d.useEffect)(function(){if(B){var e=window.setTimeout(function(){P(!1)},200);return function(){window.clearTimeout(e)}}},[B]);var Y=Object(d.useCallback)(function(e){var a,n=e.images,r=e.title;t("\n      <img\n        alt=".concat(void 0===r?"gif":r,'\n        src="').concat(null===n||void 0===n?void 0:null===(a=n.original)||void 0===a?void 0:a.url,'"\n      />\n    ')),w(!1),resetFocus(null===_||void 0===_?void 0:_.current)},[t]);return m.a.createElement(m.a.Fragment,null,m.a.createElement("button",{className:s()("drift-widget-composer-giphy-toggle",{"keyboard-focused":Q}),onClick:function openGiphy(e){if(B)return e.preventDefault();w(function(e){return!e})},"aria-label":"Click to ".concat(E?"close":"open"," GIF picker"),"aria-pressed":E,disabled:n,ref:_},m.a.createElement("style",null,"\n            .drift-widget-composer-giphy-toggle.keyboard-focused {\n              ".concat(Object(i.b)(W),"\n            }\n          ")),m.a.createElement(N.m,null)),m.a.createElement("div",{"aria-expanded":E,tabIndex:-1,className:s()("drift-widget-composer-giphy-picker",{"drift-widget-composer-giphy-picker--show":E,"drift-widget-composer-giphy-picker--mobile":K}),ref:F},m.a.createElement("style",null,"\n            .drift-widget--giphy-picker-search-clear.keyboard-focused,\n            .drift-widget-composer-giphy-picker .drift-widget-composer-giphy-list-item button:focus {\n              ".concat(Object(i.b)(W),"\n            }\n          ")),m.a.createElement("div",{className:"drift-widget-composer-giphy-picker-search"},m.a.createElement(k.a,{ariaLabel:"Search for a GIF",ariaLabelledBy:"searchGIF",className:"drift-widget--giphy-picker-search-label",htmlFor:"giphy-picker-search"}),m.a.createElement("input",{className:s()("drift-widget-input",{"keyboard-focused":X}),ref:U,type:"search",placeholder:r("gifPicker.searchPlaceholder"),value:V,onChange:z,onFocus:function onInputFocus(e){K&&e.stopPropagation()},"aria-label":"Search GIFs",id:"giphy-picker-search"}),!!V&&m.a.createElement("button",{"aria-label":"Clear GIF search field",className:s()("drift-widget--giphy-picker-search-clear",{"keyboard-focused":!!V&&Z}),onClick:function clearInput(){var e;z(null),null===U||void 0===U||null===(e=U.current)||void 0===e||e.focus()},ref:G},m.a.createElement(N.j,null))),m.a.createElement("div",{className:"drift-widget-composer-giphy-picker-list-wrapper"},m.a.createElement("ul",{className:"drift-widget-composer-giphy-list"},b.map(function(e){return m.a.createElement(GiphyPreview,{addGiphyToMessage:Y,giphy:e,key:e.id})}))),m.a.createElement("span",{className:"drift-widget-composer-giphy-picker-power"},m.a.createElement("img",{src:L.a,alt:r("gifPicker.poweredBy")}))))},U=a("908p"),G=a("nQD+"),_=a("HXmn"),H=a("mZ4K"),V=a("UXBQ"),z=a("K7i0");!function(e){e.NONE="NONE",e.PENDING="PENDING",e.ERROR="ERROR",e.SIZE_ERROR="SIZE_ERROR"}(B||(B={})),function(e){e[e.DEFAULT=26214400]="DEFAULT"}(P||(P={}));var K=function useAttachmentUpload(e){var t=e.onAttachmentUploadComplete,a=e.activeConversation,n=Object(g.b)(),r=Object(d.useState)(B.NONE),i=Object(c.a)(r,2),o=i[0],s=i[1],l=Object(g.c)(function(e){return Object(T.a)(!1,["embed","configuration","theme"],e)}).allowEndUserFileUpload,u=Object(d.useCallback)(function(){var e=Object(h.a)(j.a.mark(function _callee(e){var r,c,i,u;return j.a.wrap(function _callee$(d){for(;;)switch(d.prev=d.next){case 0:if(l){d.next=2;break}return d.abrupt("return");case 2:if(o!==B.ERROR){d.next=4;break}return d.abrupt("return");case 4:return s(B.PENDING),r=e.filter(function(e){return e.size<P.DEFAULT}).map(function(e){return Object(V.b)(e,a)}),d.prev=6,d.next=9,Promise.all(r);case 9:c=d.sent,i=c.map(function(e){return e.data}),u=i.map(function(e){return e.id}),n(Object(z.e)({attachments:i})),t(u),s(B.NONE),d.next=20;break;case 17:d.prev=17,d.t0=d.catch(6),s(B.ERROR);case 20:case"end":return d.stop()}},_callee,null,[[6,17]])}));return function(t){return e.apply(this,arguments)}}(),[a,l,o,n,t]);return{attachmentState:o,uploadAttachments:u,resetAttachmentState:function resetAttachmentState(){s(B.NONE)}}},Q=a("vLHT"),X=a("0B8E"),Z=function usePasteFiles(e){var t=e.inputRef,a=Object(d.useState)([]),n=Object(c.a)(a,2),i=n[0],o=n[1],s=Object(d.useState)(null),l=Object(c.a)(s,2),u=l[0],m=l[1],f=Object(d.useCallback)(function(e){if(e.clipboardData&&e.clipboardData.files){var t=Object(r.a)(e.clipboardData.files);t.length&&o(Object(X.a)([].concat(Object(r.a)(i),Object(r.a)(t)))),t.length&&m(e.clipboardData.getData("Text"))}},[i]);return Object(d.useEffect)(function(){t&&(t.current.onpaste=f)},[t,f]),{pastedTextFromFiles:u,pastedFiles:i,clearFiles:function clearFiles(){o([]),m(null)}}},W=a("58kB"),q=a("qwiD"),J=a("7VeV"),Y=function useTypingIndicators(e){var t=e.activeConversationId,a=Object(g.b)(),n=Object(d.useRef)(),r=Object(g.c)(function(e){return e.session.endUser.type}),c=Object(g.c)(function(e){return e.session.endUser.id}),i=Object(d.useCallback)(function(e){a(Object(q.e)("chat","user","typing:".concat(e),{userId:c,userType:r,conversationId:t,participants:[]}))},[t,a,c,r]),o=Object(d.useMemo)(function(){return Object(J.throttle)(5e3,!1,function(){return i("started")})},[i]);return{sendTypingStarted:function sendTypingStarted(){o(),n.current&&window.clearTimeout(n.current),n.current=window.setTimeout(function(){return i("finished")},5e3)},sendTypingFinished:function sendTypingFinished(){n.current&&(window.clearTimeout(n.current),n.current=null),i("finished")}}},$=a("bYXQ"),ee=a("Hvhg"),te=a("+oIK"),ae=a("U505"),ne=a("ovDp");function AttachmentIconButton(e){var t=e.isDisabled,a=e.open,n=Object(d.useRef)(null),r=Object(R.a)(n),c=Object(u.a)().activeColor;return m.a.createElement("button",{"aria-label":"Click to add an attachment",className:s()("drift-widget-composer-file-attachment",{"keyboard-focused":r}),disabled:t,onClick:a,ref:n},m.a.createElement("style",null,"\n          .drift-widget-composer-file-attachment.keyboard-focused {\n            ".concat(Object(i.c)(c),"\n          }\n        ")),m.a.createElement(N.a,null))}a("IuzP");a.d(t,"a",function(){return re});var re,ce="GIF",ie="TEXT",oe=function validateMessageText(e){return!Object(D.m)(e)&&e.trim().length>0};!function(e){e[e.AVAILABLE=0]="AVAILABLE",e[e.AVAILABLE_BUTTONS=1]="AVAILABLE_BUTTONS",e[e.UNAVAILABLE=2]="UNAVAILABLE",e[e.UNAVAILABLE_BUTTONS=3]="UNAVAILABLE_BUTTONS"}(re||(re={}));t.b=function Composer(e){var t=e.onSubmit,a=e.activeConversationId,o=e.disabled,l=void 0!==o&&o,v=e.chatHidden,j=e.alwaysShowSendAction,h=void 0!==j&&j,O=e.useGifPicker,E=void 0===O||O,w=e.alwaysShow,y=void 0!==w&&w,A=Object(d.useRef)(null),k=Object(d.useRef)(null),C=Object(d.useRef)(null),S=Object(Q.a)(),I=Object(d.useState)(""),L=Object(c.a)(I,2),x=L[0],P=L[1],V=Object(d.useState)(!1),z=Object(c.a)(V,2),X=z[0],q=z[1],J=Object(d.useState)([]),se=Object(c.a)(J,2),le=se[0],ue=se[1],de=Object(R.a)(A),me=Object(R.a)(k),fe=Object(R.a)(C),ge=Object(g.c)(function(e){return e.view}),be=ge.matchedHours,pe=ge.chatOpen,ve=Object(g.c)(function(e){return e.conversations.attachments}),je=Object(g.c)(function(e){return e.session.endUser.id}),he=Object(g.c)(function(e){return Object(T.a)(!1,["embed","configuration","theme"],e)}).allowEndUserFileUpload,Oe=Object(g.c)(ee.h),Ee=E&&Oe,we=Object(f.a)().t,ye=Object(M.a)(!0),Ae=Object(H.a)(),ke=Object(u.a)(),Ne=ke.activeColor,Te=ke.widgetBackgroundColor,Ce=ke.composerTheme,Se=ke.composerButtonHoverColor,Me=Object(W.a)(Ae).recipient,Re=Z({inputRef:A}),Ie=Re.pastedFiles,Le=Re.clearFiles,xe=Y({activeConversationId:a}),De=xe.sendTypingStarted,Be=xe.sendTypingFinished,Pe=K({activeConversation:a,onAttachmentUploadComplete:Object(d.useCallback)(function onAttachmentUploadComplete(e){ue(function(t){return[].concat(Object(r.a)(t),Object(r.a)(e))}),Le()},[])}),Fe=Pe.attachmentState,Ue=Pe.uploadAttachments,Ge=Pe.resetAttachmentState,_e=S===re.AVAILABLE||S===re.AVAILABLE_BUTTONS,He=Object(d.useMemo)(function(){return!y&&(l||!_e)},[y,l,_e]),Ve=Object(ne.a)({onDrop:Ue,disabled:l||!_e||!he}),ze=Ve.getRootProps,Ke=Ve.getInputProps,Qe=Ve.open,Xe=oe(x)||!Object(D.m)(le),Ze=Fe===B.PENDING,We=Fe===B.ERROR||Fe===B.SIZE_ERROR,qe=l||!_e||!!Ie.length;var Je=Object(d.useCallback)(function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ie,c=le?{attachments:le}:{},i=a?{}:{sentWelcomeMessage:be};Be();var o=r===ie?Object(D.r)(e):e;t({message:Object(te.a)(Object(n.a)({message:o,activeConversation:a||null,authorId:je,attributes:i},c))}),P(""),ue([]),Ge()},[a,je,be,t,Ge,Be,le]);Object(d.useEffect)(function(){he?Ie.length&&!Ze&&Ue(Ie):Le()},[he,Ze,Le,Ie,Ue]),Object(d.useEffect)(function(){a&&P("")},[a]),Object(d.useEffect)(function(){var e=A;return pe&&_e&&!v&&Object(D.p)(function(){return e.current&&e.current.focus()}),function(){return e.current&&e.current.blur()}},[v,pe,_e,S]);var Ye=Object(d.useMemo)(function(){return _e?we("composer.replyToPlaceholder",{name:Me.name}):we(S===re.UNAVAILABLE_BUTTONS?"composer.chooseOptionAbove":"composer.replyDisabled")},[_e,Me.name,S,we]),$e=he&&!Object($.b)(a),et=Ee&&!Xe&&!!a,tt=h||!Ee||Xe,at=$e||tt||et,nt=l||!Xe||Ze;return m.a.createElement(m.a.Fragment,null,(le.length||Ze||We)&&m.a.createElement("div",{className:"drift-widget-composer--pre-message-attachments"},m.a.createElement("style",null,"\n                .drift-widget-composer--pre-message-attachments button:focus {\n                  ".concat(Object(i.c)(Ne),"\n                }\n            ")),We&&m.a.createElement("div",{"aria-live":"polite",className:"drift-widget-attachment-send-status drift-widget-attachment-send-status--failed"},m.a.createElement("span",{className:"drift-widget-attachment-send-status--text"},we(Fe===B.SIZE_ERROR?"attachment.errorSize":"attachment.error")),m.a.createElement(G.a,{onClick:function onClick(){Ge(),Le()},className:"drift-widget-attachment-send-status--close",disabled:l},m.a.createElement(N.j,{width:10,height:10}))),(le.length||Ze)&&m.a.createElement("ul",{className:"drift-widget-composer-attachment-preview-list"},[].concat(Object(r.a)(le),Object(r.a)(Ze?[{pending:!0}]:[])).map(function(e,t){return m.a.createElement("li",{key:ve[e]?ve[e].id:"file-upload-loader"},ve[e]&&!ve.pending&&m.a.createElement(G.a,{"aria-label":"Remove attachment ".concat(t+1),onClick:function onClick(){return function onRemoveUploadedAttachment(e){ue(function(t){return Object(ae.a)([e],t)})}(e)},disabled:l},m.a.createElement(N.j,{width:6,height:6})),ve[e]&&!ve.pending?function resolveAttachmentTypeComponent(e){return e?e.mimeType.includes("image")?m.a.createElement("div",{className:"drift-widget-composer-attachment-preview-list-image-wrapper"},m.a.createElement("img",{alt:e.fileName,src:e.publicUrl})):m.a.createElement("div",{className:"drift-widget-composer-attachment-non-image",title:e.filename},m.a.createElement("strong",null,e.fileName),m.a.createElement(N.k,{width:16,height:16})):null}(ve[e]):m.a.createElement(_.a,{size:"small",className:"drift-widget-composer-attachment-loader"}))}))),m.a.createElement("style",null,"\n          .drift-widget-composer--default button:hover > svg path {\n            fill: ".concat(Se,"\n          }\n\n          .drift-widget-input.keyboard-focused {\n            ").concat(Object(i.d)(Te,Ne),"\n          }\n\n          .drift-widget-composer-send-button.keyboard-focused {\n            ").concat(Object(i.c)(Ne),"\n          }\n        ")),m.a.createElement("div",Object.assign({},ze({onClick:function onClick(e){return e.stopPropagation()}}),{className:s()("drift-widget-composer--default",{"drift-widget-composer--mobile":ye,"drift-widget-composer--hidden":He}),tabIndex:void 0}),he&&m.a.createElement("input",Ke()),m.a.createElement(b,null),m.a.createElement("div",{className:"drift-widget-composer--text-area"},m.a.createElement("pre",null,_e&&x.length?x:" "),m.a.createElement("label",{className:"drift-a11y-visually-hidden",htmlFor:"drift-widget-composer-input"},Ye),m.a.createElement("textarea",{className:s()("drift-widget-input",{"keyboard-focused":de}),ref:A,placeholder:Ye,value:_e?x:"",onChange:function onTextareaChange(e){Ie.length||(P(e.target.value),De())},onKeyDown:function handleTextareaKeydown(e){"Enter"!==e.key&&13!==e.keyCode||(e.preventDefault(),(oe(x)||le.length)&&(Je(x,ie),P("")))},"aria-label":"message composer",maxLength:4096,disabled:qe,id:"drift-widget-composer-input",style:Ce}),_e&&!ye&&m.a.createElement("button",{ref:k,className:s()("drift-widget-composer-emoji-toggle",{"keyboard-focused":me}),onClick:function onEmojiButtonClick(){qe||q(!X)},disabled:l,"aria-pressed":X,"aria-label":"Click to ".concat(X?"close":"open"," emoji picker")},m.a.createElement("style",null,"\n                  .drift-widget-composer-emoji-toggle.keyboard-focused:before {\n                    ".concat(Object(i.a)(Ne,24,-2,2),"\n                  }\n                ")),m.a.createElement(N.l,null))),_e&&!ye&&m.a.createElement(p.a,{open:X,onAddEmoji:function onAddEmoji(e){q(!X),_e&&!l&&(P(e),A.current&&A.current.focus())},onClickOutside:function onEmojiPickerClickOutside(e){k.current&&k.current.contains(e.target)||q(!1)}}),_e&&at&&m.a.createElement("div",{className:s()("drift-widget-composer-actions",{"drift-widget-composer-actions-expanded":$e&&(et||tt)})},$e&&m.a.createElement(AttachmentIconButton,{isDisabled:l,open:Qe}),et&&m.a.createElement(F,{onAddGiphy:function onAddGiphy(e){return Je(e,ce)},disabled:l}),tt&&m.a.createElement("button",{className:s()("drift-widget-composer-send-button",{"drift-widget-composer-send-button--disabled":nt,"keyboard-focused":fe}),"aria-label":"send message",onClick:function onClick(){return Je(x,ie)},disabled:nt||Ze,ref:C},m.a.createElement(U.a,{color:"#".concat(Ne)})))))}},fpJs:function(e,t,a){"use strict";var n=a("uDfI"),r=a("VkHq"),c=function showBrandingSelector(e){return e.embed.configuration.showBranding||!1};t.a=function useHasFooter(){var e=Object(n.c)(c),t=Object(r.a)().noPolicy;return e||!t}},gRD2:function(e,t,a){"use strict";var n=a("mj2O"),r=a.n(n),c=a("7SM1"),i=a("mssF"),o=a("K7i0"),s=a("xwTo"),l=a("LVcX"),u=a("ERkP"),d=a("uDfI"),m=a("0lfv");t.a=function useFetchActiveConverationMessages(){var e=Object(d.b)(),t=Object(d.c)(s.a),a=Object(d.c)(s.c);return{fetchMessages:Object(u.useCallback)(function(){var n=Object(c.a)(r.a.mark(function _callee(n){var c,s,u,d,f,g;return r.a.wrap(function _callee$(r){for(;;)switch(r.prev=r.next){case 0:if(c=n.limit,s=void 0===c?30:c,u=n.from,d=void 0===u?null:u,!a){r.next=3;break}return r.abrupt("return");case 3:return r.prev=3,r.next=6,Object(i.d)({conversationId:t,limit:s,from:d});case 6:return f=r.sent,g=f.data,e(Object(o.j)({messages:g.data,hasMoreMessages:Object(l.a)(!1,["pagination","more"],g),nextPageMessageId:Object(l.a)(null,["pagination","next"],g),conversationId:t})),r.abrupt("return",g);case 12:r.prev=12,r.t0=r.catch(3),Object(m.f)("Failed to fetch messages",r.t0);case 15:case"end":return r.stop()}},_callee,null,[[3,12]])}));return function(e){return n.apply(this,arguments)}}(),[t,e,a])}}},jITz:function(e,t,a){"use strict";var n=a("s8DI"),r=a("ERkP"),c=function useEventListener(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,n=Object(r.useRef)();Object(r.useEffect)(function(){n.current=t},[t]),Object(r.useEffect)(function(){if(a&&a.addEventListener){var t=function eventListener(e){return n.current(e)};return a.addEventListener(e,t),function(){a.removeEventListener(e,t)}}},[e,a])};t.a=function useKeyPress(e){var t=e.element,a=void 0===t?window:t,i=e.targetKey,o=e.onKeyDown,s=void 0===o?function(){}:o,l=e.onKeyUp,u=void 0===l?function(){}:l,d=Object(r.useState)(!1),m=Object(n.a)(d,2),f=m[0],g=m[1],b=Object(r.useCallback)(function(e){e.key===i&&(g(!0),s(e))},[i,s]),p=Object(r.useCallback)(function(e){e.key===i&&(g(!1),u(e))},[i,u]);return c("keydown",b,a),c("keyup",p,a),f}},mQ2C:function(e,t,a){},nvPd:function(e,t,a){"use strict";var n=a("s8DI"),r=a("ERkP");t.a=function useInputValue(e){var t=Object(r.useState)(e),a=Object(n.a)(t,2),c=a[0],i=a[1];return{value:c,onChange:Object(r.useCallback)(function(e){var t,a;i(null!==(t=null===e||void 0===e?void 0:null===(a=e.currentTarget)||void 0===a?void 0:a.value)&&void 0!==t?t:"")},[])}}},"p0+K":function(e,t,a){},pYxh:function(e,t,a){"use strict";var n=a("O94r"),r=a.n(n),c=a("ERkP"),i=a.n(c);a("vYbd");t.a=function Card(e){return i.a.createElement("div",Object.assign({},e,{className:r()("drift-widget-card",e.className),tabIndex:-1}),e.children)}},"q+cq":function(e,t,a){"use strict";var n=a("O94r"),r=a.n(n),c=a("pYxh"),i=a("rmQ0"),o=a("ey6Y"),s=a("ERkP"),l=a.n(s),u=a("Tr4L");t.a=function MeetingSchedulerCard(e){var t=e.agentId,a=e.additionalAgents,n=void 0===a?[]:a,d=e.children,m=e.duration,f=e.showRecipients,g=void 0!==f&&f,b=e.loadingFrame,p=void 0!==b&&b,v=Object(u.a)().t,j=Object(o.a)(t,n),h=v("meeting.scheduleAMeeting");g&&(h=t?"".concat(h," with ").concat(j):h);var O=p?{}:{minHeight:"350px"};return Object(s.useEffect)(function(){var e=document.querySelector(".drift-meeting-scheduler");e&&e.focus()},[]),l.a.createElement(c.a,{"aria-label":h,className:r()("drift-meeting-scheduler",{"drift-meeting-scheduler--loader":p}),style:O},l.a.createElement(i.a,{className:"drift-meeting-scheduler--header"},l.a.createElement("span",null,h),m&&l.a.createElement("span",null,v("meeting.duration",{duration:m}))),l.a.createElement("div",{className:"drift-meeting-scheduler--content"},d))}},rmQ0:function(e,t,a){"use strict";var n=a("nfbA"),r=a("O94r"),c=a.n(r),i=a("lE29"),o=a("ERkP"),s=a.n(o);a("9wXn");t.a=function CardHeader(e){var t=Object(i.a)().cardHeaderTheme;return s.a.createElement("header",Object.assign({},e,{className:c()("drift-widget-card-header",e.className),style:Object(n.a)(Object(n.a)({},t),e.style)}),s.a.createElement("div",{className:"drift-widget-card-header--content"},e.children))}},slYP:function(e,t,a){"use strict";var n=a("s8DI"),r=a("O94r"),c=a.n(r),i=a("rmQ0"),o=a("+Kbs"),s=a("nQD+"),l=a("hX/4"),u=a("ZGTz"),d=a("6wvX"),m=a("ERkP"),f=a.n(m),g=(a("+GZi"),function TextArea(e){var t=e.value,a=e.onValueChange,r=Object(l.a)(e,["value","onValueChange"]),i=Object(d.a)(!0),g=Object(m.useState)(!1),b=Object(n.a)(g,2),p=b[0],v=b[1],j=Object(m.useRef)(null),h=Object(m.useRef)(null);return f.a.createElement(f.a.Fragment,null,!i&&f.a.createElement(u.a,{open:p,onAddEmoji:function onAddEmoji(e){v(!p),r.disabled||(a&&a(e),h.current&&h.current.focus())},onClickOutside:function onEmojiPickerClickOutside(e){j.current&&j.current.contains(e.target)||v(!1)}}),f.a.createElement("div",{className:"drift-widget-textarea"},f.a.createElement("pre",null,t&&t.length?t:" "),f.a.createElement("textarea",Object.assign({},r,{className:c()("drift-widget-input",r.className),value:t,ref:h,onChange:function onTextAreaChange(e){a&&a(e.target.value),r.onChange&&r.onChange(e)},disabled:r.disabled})),!r.disabled&&!i&&f.a.createElement(s.a,{ref:j,className:"drift-widget-textarea--emoji-toggle",onClick:function onEmojiButtonClick(){r.disabled||v(!p)},disabled:r.disabled,"aria-expanded":p,"aria-label":"emojis"},f.a.createElement(o.l,null))))}),b=a("Mur8"),p=a("jITz"),v=a("fJrp"),j=a("lE29"),h=a("K7i0"),O=a("+oIK"),E=a("da4L"),w=a("Tr4L"),y=a("uDfI"),A=a("PjZB");a("Jrg8"),t.a=function RateConversation(e){var t=e.message,a=Object(w.a)().t,r=Object(j.a)(),l=r.activeColor,u=r.conversationRatingCloseButtonTheme,d=r.conversationRatingHeaderTheme,k=r.conversationRatingBodyTheme,N=r.composerTheme,T=Object(v.a)(t),C=Object(y.b)(),S=Object(y.c)(function(e){return e.session}).endUser,M=Object(m.useState)(!0),R=Object(n.a)(M,2),I=R[0],L=R[1],x=Object(m.useState)(""),D=Object(n.a)(x,2),B=D[0],P=D[1],F=Object(m.useState)(0),U=Object(n.a)(F,2),G=U[0],_=U[1],H=Object(m.useMemo)(function(){return Object(E.a)(t,"ratingPrompt")},[t]),V=H.ratingPromptMessage,z=H.ratingAcknowledgement,K=Object(p.a)({targetKey:"Enter"}),Q=Object(m.useCallback)(function(){var e=Object(O.a)({message:"",activeConversation:t.conversationId,authorId:S.id,attributes:{conversationRating:{ratingPrompt:{ratingAcknowledgement:z,ratingPromptMessage:V.trim()},ratingValue:G,ratingText:B}},contentType:A.c.BOT_CONVERSATION_RATING,type:A.e.BOT_CONVERSATION_RATING});C(Object(h.m)({message:e})),L(!1)},[t,C,S.id,z,V,B,G]);Object(m.useEffect)(function(){K&&function isValidMessage(e){return e&&e.trim().length>0}(B)&&Q()},[K,B,Q]),Object(m.useEffect)(function(){T&&T!==t&&!I&&L(!0)},[t,T,I]);var X=Object(m.useMemo)(function(){return b.a.map(function(e){var t=e.emoji,a=e.value;return f.a.createElement(s.a,{className:c()("drift-widget-rate-conversation--rating",{"drift-widget-rate-conversation--rating--selected":a===G}),key:"rating_".concat(a),"aria-label":"rate ".concat(a),onClick:function onClick(){return _(a)}},t)})},[G]);if(!I)return null;return f.a.createElement(f.a.Fragment,null,f.a.createElement("div",{className:"drift-widget-rate-conversation--cover"}),f.a.createElement("div",{className:"drift-widget-rate-conversation"},f.a.createElement(i.a,{style:d},f.a.createElement("span",null,V),f.a.createElement(s.a,{className:"drift-widget-rate-conversation--close-button","aria-label":"close rating",onClick:function onClick(){return L(!1)}},f.a.createElement(o.j,{width:20,height:20,fill:u.color}))),f.a.createElement("div",{className:"drift-widget-rate-conversation--body",style:k},f.a.createElement("div",{className:"drift-widget-rate-conversation--ratings"},X),!!G&&f.a.createElement("div",{className:"drift-widget-rate-conversation--composer"},f.a.createElement("div",{className:"drift-widget-rate-conversation--actions"},f.a.createElement(s.a,{className:"drift-widget-rate-conversation--send-button",onClick:Q},f.a.createElement(o.p,{color:"#".concat(l)}))),f.a.createElement(g,{"aria-label":"rating input",maxLength:4096,placeholder:a("form.placeholder.tellUsMore"),onValueChange:function onTextAreaValueChange(e){K||P(e)},value:B,style:N})))))}},vLHT:function(e,t,a){"use strict";var n=a("fTFZ"),r=a("xwTo"),c=a("da4L"),i=a("i9gz"),o=a("TbSn"),s=a("kNJ0"),l=a("ERkP"),u=a("uDfI");t.a=function useComposerState(){var e=Object(u.c)(r.d),t=Object(u.c)(r.e);return Object(l.useMemo)(function(){if(e)return n.a.UNAVAILABLE;if(Object(i.a)(t))return n.a.AVAILABLE;var a=Object(o.a)(t),r=Object(s.a)(-2,t),l=Object(c.f)(r)&&Object(c.h)(a);return Object(c.f)(a)||l||Object(c.i)(a)?n.a.UNAVAILABLE_BUTTONS:Object(c.m)(a)||Object(c.m)(r)&&Object(c.h)(a)?n.a.AVAILABLE_BUTTONS:n.a.AVAILABLE},[e,t])}},vYbd:function(e,t,a){},vkRn:function(e,t,a){"use strict";var n=a("nJ3u"),r=a("O94r"),c=a.n(r),i=a("noex"),o=a("yEsl"),s=a("fw6E"),l=a("z24s"),u=a("da4L"),d=a("LVcX"),m=a("i9gz"),f=a("TbSn"),g=a("uDfI"),b=function useLastMessage(e){var t=Object(g.c)(function(t){return Object(d.a)(null,["conversations","conversations",e,"lastMessage"],t)}),a=Object(g.c)(function(t){var a=Object(d.a)({},["conversations","messages",e],t);if(!Object(m.a)(a)){var n=Object(u.p)(a);if(n.length)return Object(f.a)(n)}return null});return t||a||{}},p=a("58kB"),v=a("kXeL"),j=a.n(v),h=a("ERkP"),O=a.n(h),E=a("Tr4L"),w=function useUserResolution(){var e=Object(E.a)().t,t=Object(g.c)(function(e){return e.session.endUser});return Object(h.useMemo)(function(){return{id:t.id,name:Object(d.a)(e("user.self"),["name"],t),avatar:Object(d.a)(j.a,["socialProfile","avatar"],t),email:Object(d.a)(null,["socialProfile","email"],t)}},[t,e])},y=a("SsZN"),A=a("Wjfv"),k=a("K7i0"),N=a("fsHk"),T=(a("JhcM"),function ConversationHistoryListItem(e){var t=e.conversation,a=void 0===t?{}:t,n=Object(s.a)().onToggleConversationHistory,r=Object(h.useRef)(null),f=Object(E.a)().t,v=Object(l.a)(r),j=Object(g.b)(),T=w(),C=Object(h.useMemo)(function(){return Object(d.a)(null,["conversation","id"],a)},[a]),S=b(C),M=Object(h.useMemo)(function(){return Object(d.a)(null,["authorId"],S)},[S]),R=Object(p.a)(M).recipient,I=Object(u.h)(S);if(Object(m.a)(S))return null;var L=S.createdAt,x=S.attributes,D=void 0===x?{}:x,B=N.a.isTimeToday(L)?N.a.unixFormatDateTime(L,f("dt.format.time.short")):N.a.unixFormatDateTime(L,f("dt.format.date.short")),P=I?T.name:R.name,F="Conversation with ".concat(R.name).concat(D.preview?" - ".concat(I?"You":"",': "').concat(D.preview,'"'):"",", ").concat(B," - Click to open");return O.a.createElement("li",{className:c()("drift-widget-conversation-list-item",{"keyboard-focused":v})},O.a.createElement("button",{onClick:function toggleConversation(e){return function(){e&&(n(!1),j(Object(A.a)()),j(Object(k.n)({conversationId:e})),Object(y.f)(e))}}(a.conversation.id),"aria-label":F,ref:r},I?O.a.createElement(o.a,{size:"SMALL",className:"drift-widget-conversation-list-item-avatar",image:T.avatar}):O.a.createElement(i.a,{size:"SMALL",className:"drift-widget-conversation-list-item-avatar",image:R.avatarUrl,id:M}),O.a.createElement("div",{className:"drift-widget-conversation-list-item-content"},O.a.createElement("h2",null,P),O.a.createElement("span",{className:"drift-widget-conversation-list-item-time"},B),O.a.createElement("p",{className:"drift-widget-conversation-list-item-last-message"},D.preview))))}),C=a("lE29"),S=a("DboL"),M=a("9xv8");a("PGb/"),t.a=function ConversationHistory(){var e=Object(s.a)().conversationHistoryOpen,t=Object(g.c)(function(e){return e.conversations.conversations}),a=Object(h.useMemo)(function(){var e;return null!==(e=Object(M.c)(Object(S.a)(t),"updatedAt"))&&void 0!==e?e:[]},[t]),r=Object(h.useMemo)(function(){return O.a.createElement("ul",{className:"drift-widget-conversation-history-list"},a.map(function(e){return O.a.createElement(T,{key:e.conversation.id,conversation:e})}))},[a]),i=Object(C.a)().activeColor;return O.a.createElement("div",{className:c()("drift-widget-conversation-history",{"drift-widget-conversation-history--open":e}),"aria-hidden":!e},O.a.createElement("style",null,"\n          .drift-widget-conversation-list-item.keyboard-focused {\n            ".concat(Object(n.c)(i),"\n          }\n        ")),e&&r)}},y0on:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a("0lfv"),r=function getNewMessageAriaLabel(e,t){return Object(n.m)(t)?null:"Chat message".concat(e?" from "+e:"",': "').concat(t,'"')}},yAze:function(e,t,a){},zoZM:function(e,t,a){}}]);